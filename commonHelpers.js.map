{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const createGalleryCardTemplate = pictureInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${pictureInfo.largeImageURL}\">\n      <img\n        class=\"gallery-img\"\n        src=\"${pictureInfo.webformatURL}\"\n        alt=\"${pictureInfo.tags}\"\n        />\n    </a>\n<div class=\"gallery-info\">\n    <div class=\"info-item\">\n      <strong>Likes</strong>\n      <span>${pictureInfo.likes}</span>\n    </div>\n    <div class=\"info-item\">\n      <strong>Views</strong>\n      <span>${pictureInfo.views}</span>\n    </div>\n    <div class=\"info-item\">\n      <strong>Comments</strong>\n      <span>${pictureInfo.comments}</span>\n    </div>\n    <div class=\"info-item\">\n      <strong>Downloads</strong>\n      <span>${pictureInfo.downloads}</span>\n    </div>\n  </div>\n  </li>\n  `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nconst API_KEY = '45269069-80d5a565d51e24ea911778696';\n\nexport const fetchPhotos = (query, page, itemPerPage) => {\n  const searchParams = {\n    params: {\n      q: query,\n      key: API_KEY,\n      page: page,\n      per_page: itemPerPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n  return axios.get('/api/', searchParams);\n\n};\n","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nconst itemPerPage = 100;\nconst izitoastPosition = 'topRight';\nlet commonTotalHits = 0;\nlet currentPage = 1;\nlet searchedValue = '';\n\nlet lightbox =  new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        })\n\nconst galleryCardHeight = () => {\n  const galleryCard = document.querySelector('.gallery-img');\n  if (galleryCard) {\n    return galleryCard.getBoundingClientRect().height;\n  }\n  return 0;\n}\n\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage++;\n    const { data } = await fetchPhotos(searchedValue, currentPage, itemPerPage);\n    const { hits } = data;\n    commonTotalHits = data.totalHits;\n    if (data.length === 0) {\n      loadMoreBtnEl.classList.add('is-hidden');\n    iziToast.error({\n      message: 'Постів більше не знайдено!',\n      position: izitoastPosition,\n    });\n      return;\n    }\n    const postCardsTemplate = hits\n      .map(imgInfo => createGalleryCardTemplate(imgInfo))\n      .join('');\n    galleryEl.insertAdjacentHTML('beforeend', postCardsTemplate);\n    lightbox.refresh();\n    const cardHeight = galleryCardHeight();\n    window.scrollBy({top: cardHeight * 2, behavior: 'smooth' });\n    if (commonTotalHits > 0 && commonTotalHits <= itemPerPage * currentPage) {\n      iziToast.error({\n        message: 'Ми шкодуемо але всі пости закінчилися!',\n        position: izitoastPosition,\n      });\n    loadMoreBtnEl.classList.add('is-hidden');\n    return;\n    }\n  } catch (err) {\n      iziToast.error({\n      message: err,\n      position: izitoastPosition,\n    });\n  }\n};\n\nconst onSearchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n        searchedValue = event.target.elements.user_query.value.trim();\n        loadMoreBtnEl.classList.add('is-hidden');\n        if (searchedValue === '') {\n          iziToast.error({\n            message: 'Поле для пошуку не має бути порожнім!',\n            position: izitoastPosition,\n          });\n          searchFormEl.reset();\n          return;\n        }\n        loaderEl.classList.remove('is-hidden');\n        currentPage = 1;\n        const { data } = await fetchPhotos(searchedValue, currentPage, itemPerPage);\n        const { hits } = data;\n        if (hits.length === 0) {\n            iziToast.error({\n              message: 'За вашим запитом, зображень не знайдено!',\n              position: 'topRight',\n            });\n        searchFormEl.reset();\n        galleryEl.innerHTML = '';\n        return;\n        }\n        const galleryCardsTemplate = hits\n        .map(imgInfo => createGalleryCardTemplate(imgInfo))\n        .join('');\n        galleryEl.innerHTML = galleryCardsTemplate;\n        lightbox.refresh();\n        loadMoreBtnEl.classList.remove('is-hidden');\n\n        loaderEl.classList.add('is-hidden');\n    } catch (err) {\n        iziToast.error({\n        message: err,\n        position: izitoastPosition,\n      });\n    }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["createGalleryCardTemplate","pictureInfo","axios","API_KEY","fetchPhotos","query","page","itemPerPage","searchParams","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","izitoastPosition","commonTotalHits","currentPage","searchedValue","lightbox","SimpleLightbox","galleryCardHeight","galleryCard","onLoadMoreBtnClick","event","data","hits","iziToast","postCardsTemplate","imgInfo","cardHeight","err","onSearchFormSubmit","galleryCardsTemplate"],"mappings":"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"}